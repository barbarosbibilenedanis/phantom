{% extends 'base.html' %}

{% block title %}
    Anasayfa - {{ block.super }}
{% endblock %}

{% block body %}

<div class="">
  <div id="content" >

       
    
    <!-- Section - Main -->
     <div class="erselerdogan">

      <section class="section section-main section-main-3 bg-dark dark has-section-divider">
        <div class="bg-image bg-fixed" style="opacity: 0.3">
          <img src="{{tenant.slider.url}}" alt="">
        </div>
        <div class="container v-center">
          <div class="row">
            <div class="col-md-7 offset-md-3">
              <h1 class="display-2" >{{tenant.name}}</h1>
              <h6 class=" mt-5" >{{tenant.home_page}}</h4>
                <h6 class=" mb-3">{{tenant.address}}</h6>
            </div>
          </div>
        </div>
        <!-- <svg class="section-divider" viewBox="0 0 1920 60" aria-hidden="true">
          <path data-theme="softSecondary" fill="var(--color-bg)" d="M0,80.75H1920V45.833H1742.083a80.491,80.491,0,0,1,12.863-1.55c5.2-.26,17.24-.3,24.153-.24,26.69.222,54.377,1.094,79.341.96,19.287-.1,37.1-.372,53.573-.788L1920,44V34.078l-6.614.216-9.221.256c-6.252.147-12.7.249-19.265.32-13.132.14-26.739.15-40.206.125-26.935-.052-53.313-.247-74.22.168-14.367-1.4-32.582-.756-48.293-1.92-10.145.509-20.876.936-24.149,2.4-16.09-.266-37.611,2.532-50.019.479V34.684c-10.959-2.291-33.371-1.869-48.292-3.84-15.861-.512-26.214,1.347-39.671,1.92-7.032.178-5.941-.773-13.8-.481-40.751-.071-41.131,5.477-62.087,8.16-4.569-5.691-47.085-5.126-77.622-5.04-2.333-4.154-22.643-5.808-50.015-6.479-4.677-2.069-17.763-2.969-22.423-5.04-4.7-.175-3.474.477-6.9.479-11.485-2.964-40.092-2.449-63.813-3.36-23.312.6-29.4,3.589-55.195,3.841-8.3-3.783-56.5-4.561-84.513-3.361-.316-1.857-5.682-3.862-20.7-4.8-2.193-.137-6.78.122-10.352,0-16.331-.564-22.974-3.145-39.671-1.441-22.812-1.938-73.831-3.919-98.311-.719-4.315-2.2-15.369-3.462-20.7-5.521-23.122-.714-41.26-2.815-65.54-2.64-13.5,1-29.918,1.6-39.671,3.12.27,1.317-1.305,2.38-6.9,2.88-35.562-1.333-83.117-2.545-93.139,2.88-14.338-.314-8.341,2.2-22.423,1.92-5.17-.16-2.615-1.4-6.9-1.68-36.327-1.894-80.653-1.762-100.041,2.161-12.433-1.631-21.648-3.708-36.221-5.04-13.359.1-36.33-.325-48.293-1.2-32.483.6-42.463,4.331-53.471,7.92-25.227-.147-43.752,2.274-58.641,4.321-11.966-1.189-27.56-.426-39.67-1.441-19.514,1.284-40.772,2.328-53.468,4.561C301.584,31.04,294,33.888,283.7,37.8c-15.047-.774-19.865-3.5-36.221-4.321-10.453-.522-37.12-1.01-48.3-.959-10.184.046-17.188,1.062-27.595.719-18.244,2.022-31.516,4.736-46.57,7.2-3.726,2.091-9.8,3.854-17.5,5.39H4.061c-.734-1.281-1.512-2.592-2.344-3.949-.546-.09-1.13-.175-1.717-.26Z" />
        </svg> -->
      </section>
      <section class="section section-lg dark bg-dark borderca" style="border-top: thick double;border-bottom: thick double;">
        <!-- BG Image -->
        <div class="bg-image bg-fixed" style="text-align: center !important;opacity: 0.5;">
          <img src="{{tenant.menu_slider.url}}"  alt="">
        </div>
        <div class="container text-center">
          <div class="row">
            <div class="col-md-6 offset-md-3">
              <a href="{% url 'category_with_products' %}" class="btn btn-outline-primary btn-lg">
                <span style="padding: 30px;font-size: 20px;color: white; font-weight: bold;">MENU </span>
              </a>
            </div>
          </div>
        </div>
      </section>
     <!--  <section class="section bg-dark dark">
        <div class="container">
          <div class="row">
            
            <div class="col-6">
              <div class="messageadd"> 
              
              <div class="feature feature-1">
                <div class="feature-icon icon icon-primary">
                  <i class="ti ti-shopping-cart"></i>
                </div>
                <div class="feature-content ">
                  <h5 data-toggle="modal" data-target="#exampleModal" href="#modalVideo" class="mb-2 text-center">Garson Çağır
                  </h5>
                </div>
              </div>
            </div>
            </div>
            <div class="col-6">
              
              <div class="feature feature-1 qr-okut">
                <div class="feature-icon icon icon-primary">
                  <i class="fa-solid fa-qrcode"></i>
                </div>
                <div class="feature-content">
                  <h5 id="camera" class="mb-2 text-center">QR kodu okutunuz</h5>
                </div>
              </div>
            
              <div id="reader" width="600px"></div>
            
              <script>
                      $(document).ready(function() {
    
                document.querySelector('.qr-okut').addEventListener('click', function() {
                  const html5QrCode = new Html5Qrcode("reader");
            
                  // Start scanning
                  html5QrCode.start(
                    { facingMode: "environment" }, // Kamera modu
                    {
                      fps: 10,    // Frame rate
                      qrbox: { width: 250, height: 250 } // Tarayıcı kutusu boyutu
                    },
                    (decodedText, decodedResult) => {
                      // QR kodu tarandı
                      window.location.href = decodedText;
                      html5QrCode.stop(); // Taramayı durdur
                    },
                    (errorMessage) => {
                      // Hata durumu
                    }
                  ).catch((error) => {
                  });
                });
              });
              </script> 
      </section>  -->
  
                  <!-- Button trigger modal -->
  
  
  <!-- Modal -->
  <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true" style="color: black;">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Garson Çağır</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        Birazdan Garsonunuz Masaya Gelecek
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Kapat</button>
      </div>
    </div>
  </div>
  </div>
 
  
  
            </div>
          </div>
        </div>
      </section>
     </div>
     <div class="emrekarakas">
      <section class="section section-main section-main-3 bg-dark dark mb-2">

        <div class="bg-image bg-fixed"><img src="{{tenant.slider.url}}" alt=""></div>
    
        <div class="container v-center">
            <div class="row">
                <div class="col-md-7 offset-md-3">
                    <h1 class="display-2" style="-webkit-text-stroke: 1px black;"><strong>{{tenant.name}}</strong></h1>
                    <h3 class="mb-5" style="-webkit-text-stroke: 1px black;">{{tenant.home_page}}</h4>
                   
                </div>
            </div>
        </div>
    
    </section>
    
    <!-- Section - About -->
    <section class="section section-bg-edge" style="border-bottom: thick double black;border-top:thick double black ;">
    
        <div class="image right col-md-6 offset-md-6">
            <div class="bg-image"><img src="{{tenant.menu_slider.url}}" alt=""></div>
        </div>
    
        <div class="container">
            <div class="col-lg-5 col-md-9">
                  {{tenant.about}}
                </div>
            </div>
        </section>
    
    
    
    <!-- Section - Menu -->
    <section class="section cover protrude pull-up-10" >
    
        <div class="menu-sample-carousel carousel inner-controls" data-slick='{
            "dots": true,
            "slidesToShow": 3,
            "slidesToScroll": 1,
            "infinite": true,
            "responsive": [
                {
                    "breakpoint": 991,
                    "settings": {
                        "slidesToShow": 2,
                        "slidesToScroll": 1
                    }
                },
                {
                    "breakpoint": 690,
                    "settings": {
                        "slidesToShow": 1,
                        "slidesToScroll": 1
                    }
                }
            ]
        }'>
           {% for category, products in category_product_map.items %}
            <div class="menu-sample mt-3">
                <a href="{%url 'category_with_products'%}">
                    <img src="{{ category.image.url }}" alt="" class="image">
                    <h3  style="-webkit-text-stroke: 1px black;" class="title">{{ category.name }}</h3>
                </a>
            </div>
            {% endfor %}
            <style>
              .menu-sample img {
                  width: 100%; /* Genişliği konteynıra uyar */
                  height: 200px; /* Sabit bir yükseklik belirler */
                  object-fit: cover; /* Resmin boyutlandırma sırasında orantısını korumasını sağlar */
              }
          </style>
            <!-- Menu Sample -->
            
        </div>
    
    </section>
    
    <!-- Section - Menu Sample -->
    
    <!-- Section - Steps -->

    
    <!-- Section -->
    
     </div>

    
    <!-- Section - Steps -->
    
    <!-- Section -->
    <!-- Footer -->

    <!-- Footer / End -->
  </div>
</div>


<script>
  $(document).ready(function() {
      const messageAddDiv = $('.messageadd');

      messageAddDiv.on('click', function() {
          // Cookieden table değerini al
          const tableNumber = getCookie('table');

          // AJAX isteği gönder
          $.ajax({
              url: '/add-message/',  // Django view URL'si
              type: 'POST',
              contentType: 'application/json',
              data: JSON.stringify({ table: tableNumber }),
              headers: {
                  'X-CSRFToken': getCookie('csrftoken')  // CSRF token
              },
              success: function(response) {

              },
              error: function() {
                  alert('An error occurred.');
              }
          });
      });

      // Cookie'den değeri al
      function getCookie(name) {
          let cookieValue = null;
          if (document.cookie && document.cookie !== '') {
              const cookies = document.cookie.split(';');
              for (let i = 0; i < cookies.length; i++) {
                  const cookie = cookies[i].trim();
                  if (cookie.substring(0, name.length + 1) === (name + '=')) {
                      cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                      break;
                  }
              }
          }
          return cookieValue;
      }
  });
</script>
  <!-- Content / End -->
  {% include 'components/cart.html' %}
{% endblock %}
<!-- {% include 'footer.html' %} -->